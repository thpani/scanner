<!doctype html>
<html lang="en">
  <head>
    <title>Scanner Admin</title>
    <link rel="stylesheet" href="node_modules/ng-admin/build/ng-admin.min.css">
  </head>
  <body ng-app="myApp">
    <div ui-view="ng-admin"></div>
    <script src="node_modules/ng-admin/build/ng-admin.min.js"></script>
    <script src="node_modules/angular-barcode/dist/angular-barcode.js"></script>
    <script type="text/javascript">
    var myApp = angular.module('myApp', ['ng-admin', 'angular-barcode']);

    myApp.config(['NgAdminConfigurationProvider', function(nga) {
      
      var admin = nga.application('Scanner Admin');

      var list = nga.entity('lists');
      list.listView().fields([
        nga.field('id').label('Wunderlist List ID'),
        nga.field('name')
      ]);
      list.creationView().fields(list.listView().fields());
      list.editionView().fields(list.listView().fields());

      var product = nga.entity('products').identifier(nga.field('ean'));
      product.listView().fields([
        nga.field('ean')
          .isDetailLink(true)
          .label('EAN'),
        nga.field('name'),
        nga.field('list', 'reference')
          .targetEntity(list)
          .targetField(nga.field('name'))
          .label('List'),
        nga.field('shelf')
      ]);
      product.creationView().fields(product.listView().fields());
      product.editionView().fields(product.listView().fields(), [
        nga.field('ean')
        .label('Barcode')
        .template('<angular-barcode ng-model="value"></angular-barcode>')
      ]);

      admin.addEntity(product);
      admin.addEntity(list);

      admin.dashboard(nga.dashboard()
        .addCollection(nga.collection(product).fields(product.listView().fields()))
      );

      nga.configure(admin);
    }]);
    </script>
  </body>
</html>
